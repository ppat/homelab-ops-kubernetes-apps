@version: 4.8

@include "scl.conf"

options {
  # on error, drop and log to internal() source
  on-error(drop-message);
};

source s_internal {
  internal();
};

source s_net {
  default-network-drivers();
};

# destination d_stdout {
#   stdout();
# };

destination d_loki {
  syslog("promtail-syslog.logging.svc.cluster.local." transport("tcp") port("1514"));
};

log {
  source(s_net);
  source(s_internal);
  destination(d_loki);
};
