---
config:
  snippets:
    # yamllint disable-line rule:indentation
    defaultScrapeConfigs: |-
      - job_name: journal
        journal:
          path: /run/log/journal
          max_age: 12h
          labels:
            job: systemd-journal
        relabel_configs:
        - source_labels:
          - __journal__systemd_unit
          target_label: systemd_unit
        - source_labels:
          - __journal_syslog_identifier
          target_label: syslog_identifier
        - source_labels:
          - __journal_priority_keyword
          target_label: severity

      - job_name: journal
        journal:
          path: /var/log/journal
          max_age: 12h
          labels:
            job: systemd-journal
        relabel_configs:
        - source_labels:
          - __journal__systemd_unit
          target_label: systemd_unit
        - source_labels:
          - __journal_syslog_identifier
          target_label: syslog_identifier
        - source_labels:
          - __journal_priority_keyword
          target_label: severity

      - job_name: system
        static_configs:
        - targets:
          - localhost
          labels:
            service_name: dmesg
            __path__: /var/log/dmesg
        - targets:
          - localhost
          labels:
            service_name: cloud-init
            __path__: /var/log/cloud-init-output.log
        - targets:
          - localhost
          labels:
            service_name: cloud-init
            __path__: /var/log/cloud-init.log
